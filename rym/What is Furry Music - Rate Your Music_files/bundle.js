var g_keyCodes={esc:27,ret:13,comma:188,backslash:191,slash:220,pageUp:33,pageDown:34,end:35,"home.safari":63273,home:36,backspace:8,up:38,down:40};function updateStyleThemeLabels(){var a=window.themes.indexOf(window.localStorage.theme);a!=-1?$("#page_frame_theme_switch").html(window.themes_label[a]):$("#page_frame_theme_switch").html("Auto"),window.localStorage.size_mode?$("#page_frame_size_mode_switch").html("Compact"):$("#page_frame_size_mode_switch").html("Normal")}function updateTheme(){var a="";for(var e in window.themes)a+=" theme_"+window.themes[e];if(!window.localStorage.theme){var m="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(m="eve"),$("html, body").removeClass(a).addClass("theme_"+m)}}function switchSizeMode(a){a.stopPropagation();var e=["smaller"],m=["Compact"],i="";for(var o in e)i+=" size_mode_"+e[o];var t=e.indexOf(window.localStorage.size_mode);if(t++,t>=e.length){$("#page_frame_size_mode_switch").html("Normal"),delete window.localStorage.size_mode,$("html, body").removeClass(i).addClass("size_mode_normal");return}$("#page_frame_size_mode_switch").html(m[t]),window.localStorage.size_mode=e[t],$("html, body").removeClass(i).addClass("size_mode_"+e[t])}function switchTheme(a,e){a&&a.stopPropagation();var m="";for(var i in window.themes)m+=" theme_"+window.themes[i];var o;if(e?window.localStorage.theme==e?o=window.themes.length:o=window.themes.indexOf(e):(o=window.themes.indexOf(window.localStorage.theme),o++),o>=window.themes.length){$("#page_frame_theme_switch").html("Auto"),delete window.localStorage.theme;var t="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(t="eve"),$("html, body").removeClass(m).addClass("theme_"+t);return}$("#page_frame_theme_switch").html(window.themes_label[o]),window.localStorage.theme=window.themes[o],$("html, body").removeClass(m).addClass("theme_"+window.themes[o])}rymQ(function(){$(".has_tip").tipTip(),$(".timeago").timeago()});
 
function dayMonth(n){var o=new Date(n),s=o.getDate(),l=o.getMonth(),w=["January","February","March","April","May","June","July","August","September","October","November","December"];return s+" "+w[l]}String.prototype.fuzzyTime=function(n){ago=this,n=n||{},this.days=n.days||"d",this.hours=n.hours||"h",this.minutes=n.minutes||"m",this.on=n.on||"",this.ago=ago,this.setMonthArray=n.setMonthArray||["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.setMinDays=n.setMinDays||30,this.dateFormat=n.dateFormat||{};var o=new Date,s=new Date(ago),l=o-s;l/=1e3;var w=Math.round(l%60);l=Math.floor(l/60);var z=Math.round(l%60);l=Math.floor(l/60);var b=Math.round(l%24);l=Math.floor(l/24);var F=l;this.formatDate=function(){var N=this.ago,T=this.setMonthArray,J=new Date(N),i=J.getDate(),e=J.getMonth(),t=J.getFullYear();return this.dateFormat=="simple"?N=T[e]+" "+i+"' "+t.toString().slice(2):N=i+" "+T[e]+" "+t};var M;return F!=0?F<this.setMinDays?b!=0?M=F+this.days:M=F+this.days:M=this.on+" "+this.formatDate():b!=0?M=b+this.hours:z==0?M="now":M=z+this.minutes,M},String.prototype.toHHMMSS=function(){var n=parseInt(this,10);if(!n)return"";var o=Math.floor(n/3600),s=Math.floor((n-o*3600)/60),l=n-o*3600-s*60;return s<10&&(s="0"+s),l<10&&(l="0"+l),o+":"+s+":"+l},String.prototype.toMMSS=function(){var n=parseInt(this,10);if(!n)return"";var o=Math.floor(n/60),s=n-o*60;return s<10&&(s="0"+s),o+":"+s},String.prototype.abbreviateNumber=function(){var n=parseInt(this);if(n<1e3)return n;var o=["","k","M"],s=Math.log10(n)/3|0;if(s==0)return n;var l=o[s],w=Math.pow(10,s*3),z=n/w,b=1;return n>1e4&&(b=0),b=0,z.toFixed(b)+l},Math.log10=Math.log10||function(n){return Math.log(n)*Math.LOG10E};var Hogan=Hogan||{};(function(n){n.Template=function(i,e,t,r){i=i||{},this.r=i.code||this.r,this.c=t,this.options=r||{},this.text=e||"",this.partials=i.partials||{},this.subs=i.subs||{},this.ib()},n.Template.prototype={r:function(i,e,t){return""},v:T,t:N,render:function(e,t,r){return this.ri([e],t||RYMtemplate,r)},ri:function(i,e,t){return this.r(i,e,t)},ep:function(i,e){var t=this.partials[i],r=e[t.name];if(t.instance&&t.base==r)return t.instance;if(typeof r=="string"){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}return r?(this.partials[i].base=r,t.subs&&(this.activeSub===void 0&&(e.stackText=this.text),r=s(r,t.subs,t.partials,e.stackText||this.text)),this.partials[i].instance=r,r):null},rp:function(i,e,t,r){var a=this.ep(i,t);return a?a.ri(e,t,r):""},rs:function(i,e,t){var r=i[i.length-1],a,_,f;if(typeof r=="function"&&(a=r,r=i[i.length-2],_=this.buf.length),!J(r))t(i,e,this);else for(var g=0;g<r.length;g++)i.push(r[g]),t(i,e,this),i.pop();a&&(f=this.buf.substr(_),this.buf=this.buf.substr(0,_),this.b(a(f)))},s:function(i,e,t,r){if(J(i)&&i.length===0)return!1;var a;typeof i=="function"&&(i=this.ms(i,e,t),typeof i=="function"&&(a=i));var _=!!i;return!r&&_&&e&&(a?e.push(a):e.push(typeof i=="object"?i:e[e.length-1])),_},d:function(i,e,t,r){var a,_=i.split("."),f=this.f(_[0],e,t,r),g=this.options.modelGet,d=null;if(i==="."&&J(e[e.length-2]))f=e[e.length-1];else for(var S=1;S<_.length;S++)a=o(e,S,_[S],f,g),a!=null?(d=f,f=a):f="";return r&&!f?!1:(!r&&typeof f=="function"&&(e.push(d),f=this.mv(f,e,t),e.pop()),f)},f:function(i,e,t,r){for(var a=!1,_=null,f=!1,g=this.options.modelGet,d=e.length-1;d>=0;d--)if(_=e[d],a=o(e,d,i,_,g),a!=null){f=!0;break}return f?(!r&&typeof a=="function"&&(a=this.mv(a,e,t)),a):r?!1:""},b:function(i){this.buf+=i},fl:function(){var i=this.buf;return this.buf="",i},ib:function(){this.buf=""},ms:function(i,e,t){var r=e[e.length-1];return i.call(r)},mv:function(i,e,t){var r=e[e.length-1];return i.call(r)},sub:function(i,e,t,r){var a=this.subs[i];a&&(this.activeSub=i,a(e,t,this,r),this.activeSub=!1)}};function o(i,e,t,r,a){var _,f;if(r&&(typeof r=="object"||typeof r=="string"||typeof r=="number")){if(t[0]==="="){var g=t.substring(1);return r.toString()==g}if(t[0]==="["){var d=parseInt(t.substring(1,t.length-1));if(Number.isInteger(d))return r[d]}if(typeof r=="number"&&t==="comma")return r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");if(typeof r=="number"&&t==="decimal_0")return parseFloat(Math.round(r*100)/100).toFixed(0);if(typeof r=="number"&&t==="decimal_1")return parseFloat(Math.round(r*100)/100).toFixed(1);if(typeof r=="number"&&t==="decimal_2")return parseFloat(Math.round(r*100)/100).toFixed(2);if(typeof r=="number"&&t==="singular")return r==1;if(typeof r=="number"&&t==="greater_than_1")return r>1;if(typeof r=="number"&&t==="minus_1")return r-1;if(typeof r=="number"&&t==="duration_hhmmss")return(r+"").toHHMMSS();if(typeof r=="number"&&t==="duration_mmss")return(r+"").toMMSS();if(t==="uppercase")return r.toUpperCase();if(t==="lowercase")return r.toLowerCase();if(t==="cap_first_word")return r.charAt(0).toUpperCase()+r.slice(1);if(t==="first_item")return r[0];if(t==="item_2")return r[1];if(t==="item_3")return r[2];if(t==="item_4")return r[3];if(t==="last_item")return r[r.length-1];if(t==="all_but_last")return r.slice(0,r.length-1);if(t==="first_2")return r.slice(0,2);if(t==="first_3")return r.slice(0,3);if(t==="first_4")return r.slice(0,4);if(t==="first_5")return r.slice(0,5);if(t==="first_10")return r.slice(0,10);if(t==="first_15")return r.slice(0,15);if(t==="first_20")return r.slice(0,20);if(t==="first_25")return r.slice(0,25);if(t==="rest_1")return r.slice(1);if(t==="rest_2")return r.slice(2);if(t==="rest_3")return r.slice(3);if(t==="rest_4")return r.slice(4);if(t==="rest_5")return r.slice(5);if(t==="rest_10")return r.slice(10);if(t==="rest_15")return r.slice(15);if(t==="rest_25")return r.slice(25);if(t==="is_positive")return r>0;if(t==="has_one_item")return r.length===1;if(t==="has_expand_1")return r.length>1;if(t==="has_expand_2")return r.length>2;if(t==="has_expand_3")return r.length>3;if(t==="has_expand_4")return r.length>4;if(t==="has_expand_5")return r.length>5;if(t==="has_expand_10")return r.length>10;if(t==="has_expand_15")return r.length>15;if(t==="has_expand_20")return r.length>20;if(t==="has_expand_25")return r.length>25;if(t==="abbreviated_num")return(r+"").abbreviateNumber();if(t==="medium_length")return r.length>15&&r.length<=30;if(t==="long_length")return r.length>30&&r.length<=45;if(t==="extralong_length")return r.length>45;if(t==="join_with_comma")return r.join(", ");if(t==="join_with_slash")return r.join("/ ");if(t==="ref_object")return r.split(".")[0];if(t==="ref_assoc_id")return r.split(".")[1];if(t==="format_name"){var S=[];return S.push(r.name_display),r.type=="city"&&r.region_short_name.length>0&&S.push(r.region_short_name),(r.type=="city"||r.type=="region")&&S.push(r.country_name_display),S.join(", ")}if(t==="format_start_date_long"){var h=r[0],v=r[1],A=r[2],p="_January_February_March_April_May_June_July_August_September_October_November_December".split("_");if(h&&v&&A)return""+A+" "+p[v]+" "+h;if(h&&v)return""+p[v]+" "+h;if(h)return""+h}if(t==="format_start_date"){var h=r[0],v=r[1],A=r[2],p="_Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");if(h&&v&&A)return""+A+" "+p[v]+" "+h;if(h&&v)return""+p[v]+" "+h;if(h)return""+h}if(t==="format_end_date"){var h=r[4],v=r[5],A=r[6],p="_Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");if(h&&v&&A)return""+A+" "+p[v]+" "+h;if(h&&v)return""+p[v]+" "+h;if(h)return""+h}if(t==="format_release_type"){var B={album:"Album",ep:"EP",comp:"Compilation",single:"Single",video:"Video",unauth:"Bootleg",mixtape:"Mixtape",musicvideo:"Music video",additional:"Additional releases",djmix:"DJ Mix"};return B[r]}if(t==="stringify_current")return JSON.stringify(i[i.length-1]);if(t==="stringify")return JSON.stringify(r,null,2);if(t==="stringify_json_string")return JSON.stringify(JSON.parse(r),null,2);if(t==="escape_for_js")return r.replace(/[\/\(\)\']/g,"\\$&");if(t==="plus_one")return r+1;if(t==="minus_one")return r-1;if(t==="fuzzytime")return r.fuzzyTime();if(t==="fuzzytime_longform")return r.fuzzyTime({setMonthArray:["January","February","March","April","May","June","July","August","September","October","November","December"]});if(t==="dayMonth")return dayMonth(r);if(t==="random_360")return Math.floor(Math.random()*360);if(t==="img_75")return r.replace(/\{\{size\}\}/g,"75");if(t==="img_150")return r.replace(/[\/\(\)\']/g,"\\$&");if(t==="img_300")return r.replace(/[\/\(\)\']/g,"\\$&");if(t==="img_600")return r.replace(/[\/\(\)\']/g,"\\$&");if(t==="img_900")return r.replace(/[\/\(\)\']/g,"\\$&");if(t==="image_aspect_ratio")return r.dimensions?r.dimensions[0]/r.dimensions[1]:1;if(t==="image_id_from_path")return r[1];if(t==="mime_type_from_path")return"image/"+r[0];if(t==="encode_for_image_filename")return encodeURIComponent(r).split(".").join("_");if(t==="urlencode")return encodeURIComponent(r);if(t==="extension_from_path")return r[0];if(t==="dir_for_size_1x"){for(var u in i)if(i[u].image_config&&i[u].image_config.size_1x)return i[u].image_config.size_1x>300?r[3]:r[2];return r.sm}if(t==="dir_for_size_2x"){for(var u in i)if(i[u].image_config&&i[u].image_config.size_2x)return i[u].image_config.size_2x>300?r[3]:r[2];return r.sm}if(t==="release_is_collab"){for(var u in i)if(i[u].release_type&&i[u].release_type[1]==="collab")return!0;return!1}if(t==="format_extract_credited_name")return(""+(r[1]||"")+(r[2]||"")+r[0]).trim();if(t==="get_locale_name"){var O=r.aka_text?[r.aka_text]:r.original,m={main:(""+(O[1]||"")+(O[2]||"")+O[0]).trim()};for(var u in i)if(i[u].user_vars&&i[u].user_vars.options){var I=i[u].user_vars.options,E=I.user_langs;if(I.artist_loc_display)switch(I.artist_loc_display){case"show_both":case"show_user_lang":for(var u in E){var G=E[u];if(r.language&&r.language[G]){var j=r.language[G],U=(""+(j[1]||"")+(j[2]||"")+j[0]).trim();I.artist_loc_display==="show_both"?m.secondary=U:m.main=U}}}}return m}if(t==="music_primary_links"){for(var u in i)if(i[u].release_type){var H=i[u].release_type.indexOf("collab")!=-1,m=[],C=0;if(r.composers&&r.composers.length){if(C=r.composers.length,C==1)m.push(r.composers[0]);else if(C<=2)m=r.composers;else{var V=r.composers[0];m.push(V)}if(m.length==1&&r.performers&&r.performers.length<=2)for(var $ in r.performers)r.composers.filter(function(q){return q.ref===r.performers[$].ref}).length==0&&m.push(r.performers[$])}else r.performers&&r.performers.length&&(m=r.performers);var P=m.length;for(var D in m){var R=parseInt(D);R===P-2?H?m[D].add_and=!0:m[D].add_slash=!0:R<P-2&&(H?m[D].add_comma=!0:m[D].add_slash=!0)}return r.name&&(m=[m[0]],m[0].name={original:{name:r.name}}),{links:m}}return[]}if(t==="blocked_by_flags"){if(!r.flags||r.flags.length==0)return!1;if(r.force_block_image)return!0;for(var u in i){if(i[u].force_block_image)return!0;if(i[u].user_vars){var Y=i[u].user_vars.options.image_flags,L=r.flags;for(var D in L)if(Y.indexOf(L[D])==-1)return!0;return!1}}return!0}r[t]!=null?_=r[t]:a&&r.get&&typeof r.get=="function"&&(_=r.get(t))}return _}function s(i,e,t,r){function a(){}a.prototype=i;function _(){}_.prototype=i.subs;var f,g=new a;g.subs=new _,g.subsText={},g.ib();for(f in e)g.subs[f]=e[f],g.subsText[f]=r;for(f in t)g.partials[f]=t[f];return g}var l=/&/g,w=/</g,z=/>/g,b=/\'/g,F=/\"/g,M=/[&<>\"\']/;function N(i){return String(i==null?"":i)}function T(i){return i=N(i),M.test(i)?i.replace(l,"&amp;").replace(w,"&lt;").replace(z,"&gt;").replace(b,"&#39;").replace(F,"&quot;"):i}var J=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"}})(typeof exports!="undefined"?exports:Hogan);
 
/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 0.11.4
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2012, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */(function(n){n.timeago=function(t){return t instanceof Date?_(t):typeof t=="string"?_(n.timeago.parse(t)):typeof t=="number"?_(new Date(t)):_(n.timeago.datetime(t))};var g=n.timeago;n.extend(n.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:"+",suffixAgo:null,suffixFromNow:null,justnow:"now",justnow_long:"just now",seconds:"%d sec",seconds_long:"%d seconds ago",minute:"1m",minute_long:"1 minute ago",minutes:"%dm",minutes_long:"%d minutes ago",hour:"1h",hour_long:"1 hour ago",hours:"%dh",hours_long:"%d hours ago",day:"1d",day_long:"1 day ago",days:"%dd",days_long:"%d days ago",wordSeparator:" ",numbers:[]}},inWords:function(t,e,d,v,l,f,N){var r=this.settings.strings,J=r.prefixAgo,C=r.suffixAgo;this.settings.allowFuture&&e<0&&(J=r.prefixFromNow,C=r.suffixFromNow);var o=Math.abs(e)/1e3,s=o/60,i=s/60,h=i/24,Y=h/365;function a(D,x){var S=n.isFunction(D)?D(x,e):D,j=r.numbers&&r.numbers[x]||x;return S.replace(/%d/i,j)}var c;if(d?c=o<15&&a(r.justnow_long,Math.round(o))||o<45&&a(r.seconds_long,Math.round(o))||o<90&&a(r.minute_long,1)||s<45&&a(r.minutes_long,Math.round(s))||s<90&&a(r.hour_long,1)||i<24&&a(r.hours_long,Math.round(i))||i<42&&a(r.day_long,1)||h<30&&a(r.days_long,Math.round(h)):l?c=o<15&&a(r.justnow,Math.round(o))||o<45&&a(r.seconds,Math.round(o))||o<90&&a(r.minute,1)||s<45&&a(r.minutes,Math.round(s))||s<90&&a(r.hour,1)||i<24&&a(r.hours,Math.round(i))||i<42&&a(r.day,1)||a(r.days,Math.round(h)):c=o<15&&a(r.justnow,Math.round(o))||o<45&&a(r.seconds,Math.round(o))||o<90&&a(r.minute,1)||s<45&&a(r.minutes,Math.round(s))||s<90&&a(r.hour,1)||i<24&&a(r.hours,Math.round(i))||i<42&&a(r.day,1)||h<30&&a(r.days,Math.round(h)),N){var u=new Date(new Date().getTime()-e),w=new Date,y=u.getMonth(),M=u.getDate(),m="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),p=u.getFullYear(),T=w.getFullYear();return M+" "+m[y]+" "+p+", "+t.toLocaleTimeString()}else if(!l&&(f||e>1e3*60*60*24*30)){var u=new Date(new Date().getTime()-e),w=new Date,y=u.getMonth(),M=u.getDate(),m;d||v?m="January_February_March_April_May_June_July_August_September_October_November_December".split("_"):m="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");var p=u.getFullYear(),T=w.getFullYear();return M+" "+m[y]+" "+(p===T?"":p)}else{if(l&&h>365){var u=new Date(new Date().getTime()-e);return""+u.getFullYear()}var W=r.wordSeparator===void 0?" ":r.wordSeparator;return n.trim(c)}},parse:function(t){var e=n.trim(t);return e=e.replace(/\.\d+/,""),e=e.replace(/T/," ").replace(/Z/," UTC"),e=e.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),e=e.replace(/\s/,"T"),e=e.replace(/\+00/,""),e+="Z",new Date(e)},datetime:function(t){var e=g.isTime(t)?n(t).attr("datetime"):n(t).attr("title");return e.indexOf(" ")>-1?n.trim(g.parse(e)):new Date(e)},isTime:function(t){return n(t).get(0).tagName.toLowerCase()==="time"}}),n.fn.timeago=function(){var t=this;t.each(F);var e=g.settings;return e.refreshMillis>0&&setInterval(function(){t.each(F)},e.refreshMillis),t};function F(){var t=n(this).hasClass("longform"),e=n(this).hasClass("fullmonth"),d=n(this).hasClass("days_or_year"),v=n(this).hasClass("dateonly"),l=n(this).hasClass("datetime"),f=b(this);return isNaN(f.datetime)||n(this).text(n.trim(_(f.datetime,t,e,d,v,l))),this}function b(t){if(t=n(t),!t.data("timeago")){t.data("timeago",{datetime:g.datetime(t)});var e=n.trim(t.text());if(e.length>0&&!(g.isTime(t)&&t.attr("title"))){var d=g.datetime(t).toString();t.attr("title","").attr("data-tiptip",d).addClass("has_tip").tipTip()}}return t.data("timeago")}function _(t,e,d,v,l,f){return g.inWords(t,A(t),e,d,v,l,f)}function A(t){return new Date().getTime()-t.getTime()}})(jQuery),rymQ(function(){$(".timeago").timeago()});
 
(function(o){o.fn.tipTip=function(y){var P={activation:"hover",keepAlive:!1,maxWidth:"1200px",edgeOffset:3,defaultPosition:"bottom",delay:200,fadeIn:200,fadeOut:200,attribute:"data-tiptip",content:!1,enter:function(){},exit:function(){}},t=o.extend(P,y);if(o("#tiptip_holder").length<=0){var i=o('<div id="tiptip_holder" style="pointer-events:none;max-width:'+t.maxWidth+';"></div>'),g=o('<div id="tiptip_content"></div>'),_=o('<div id="tiptip_arrow"></div>');o("body").append(i.html(g).prepend(_.html('<div id="tiptip_arrow_inner"></div>')))}else var i=o("#tiptip_holder"),g=o("#tiptip_content"),_=o("#tiptip_arrow");return this.each(function(){var r=o(this);if(t.content)var b=t.content;else var b=r.attr(t.attribute);if(b!=""){let h=function(){t.enter.call(this),g.html(b),i.hide().removeAttr("class").css("margin","0"),_.removeAttr("style");var n=parseInt(r.offset().top),l=parseInt(r.offset().left),x=parseInt(r.outerWidth()),u=parseInt(r.outerHeight()),d=i.outerWidth(),f=i.outerHeight(),m=Math.round((x-d)/2),I=Math.round((u-f)/2),v=Math.round(l+m),a=Math.round(n+u+t.edgeOffset),e="",c="",w=Math.round(d-12)/2;t.defaultPosition=="bottom"?e="_bottom":t.defaultPosition=="top"?e="_top":t.defaultPosition=="left"?e="_left":t.defaultPosition=="right"&&(e="_right");var A=m+l<parseInt(o(window).scrollLeft()),k=d+l>parseInt(o(window).width());A&&m<0||e=="_right"&&!k||e=="_left"&&l<d+t.edgeOffset+5?(e="_right",c=Math.round(f-13)/2,w=-12,v=Math.round(l+x+t.edgeOffset),a=Math.round(n+I)):(k&&m<0||e=="_left"&&!A)&&(e="_left",c=Math.round(f-13)/2,w=Math.round(d),v=Math.round(l-(d+t.edgeOffset+5)),a=Math.round(n+I));var M=n+u+t.edgeOffset+f+8>parseInt(o(window).height()+o(window).scrollTop()),O=n+u-(t.edgeOffset+f+8)<0;M||e=="_bottom"&&M||e=="_top"&&!O?(e=="_top"||e=="_bottom"?e="_top":e=e+"_top",c=f,a=Math.round(n-(f+5+t.edgeOffset))):(O|(e=="_top"&&O)||e=="_bottom"&&!M)&&(e=="_top"||e=="_bottom"?e="_bottom":e=e+"_bottom",c=-12,a=Math.round(n+u+t.edgeOffset)),e=="_right_top"||e=="_left_top"?a=a+5:(e=="_right_bottom"||e=="_left_bottom")&&(a=a-5),(e=="_left_top"||e=="_left_bottom")&&(v=v+5),_.css({"margin-left":w+"px","margin-top":c+"px"}),i.css({"margin-left":v+"px","margin-top":a+"px"}).attr("class","tip"+e),p&&clearTimeout(p),p=setTimeout(function(){i.stop(!0,!0).fadeIn(t.fadeIn)},t.delay)},s=function(){t.exit.call(this),p&&clearTimeout(p),i.fadeOut(t.fadeOut)};var T=h,W=s;t.content||r.removeAttr(t.attribute);var p=!1;t.activation=="hover"?(r.hover(function(){h()},function(){t.keepAlive||s()}),t.keepAlive&&i.hover(function(){},function(){s()})):t.activation=="focus"?r.focus(function(){h()}).blur(function(){s()}):t.activation=="click"&&(r.click(function(){return h(),!1}).hover(function(){},function(){t.keepAlive||s()}),t.keepAlive&&i.hover(function(){},function(){s()}))}})}})(jQuery);
 
var d=(e,t,a)=>new Promise((r,s)=>{var i=o=>{try{n(a.next(o))}catch(l){s(l)}},c=o=>{try{n(a.throw(o))}catch(l){s(l)}},n=o=>o.done?r(o.value):Promise.resolve(o.value).then(i,c);n((a=a.apply(e,t)).next())});function openShortcut(e){currentElement=e;var t=$(e).offset(),a=$("#shortcut").outerWidth(),r=$(window).outerWidth(),s=t.left+$(e).outerWidth();s+a>r&&(s=r-a),$("#shortcut").css("top",t.top+"px").css("left",s+"px").show(),shortcut_first_sc&&shortcut_first_sc!=""&&viewshortcut(shortcut_first_sc,shortcut_first_func)}function did(e){return document.getElementById(e)}function RYMSession(){this.userid=0,this.username="",this.token="",this.init=function(e,t,a,r){this.userid=e,this.username=t,this.token=a,this.images=r},this.logout=function(){this.userid=0,this.username="",this.token=""},this.isLoggedIn=function(){return this.userid!=0},this.agreeRules=function(e){$.ajax({url:"/api/1/rules/"+e,method:"POST",dataType:"json",data:{category:e,action:"agree"},success:function(t,a,r){rym.closeModal(),rym.session.rules_agreed=t.rules_agreed,rym.session.rulesCallback()}})},this.confirmRules=function(e,t){this.rulesCallback=t,this.rules_agreed[e]&&t()}}var RYMresource={};function RYMRequest(){this.sendRequest=function(requestType,data,callback,dataType,cache,url){cache==null&&(cache=!1),url==null&&(url="/httprequest/"+data.action),data.rym_ajax_req=1,data.request_token=rym.session.token;var form_data=new FormData;for(var key in data)form_data.append(key,data[key]);fetch(url,{method:requestType,body:form_data}).then(function(response){dataType==="script"?response.text().then(data=>{eval(data)}):dataType=="json"?response.json().then(e=>{callback(e)}):alert(dataType)})},this.post=function(e,t,a,r,s,i){return t.action=e,r=r||"script",this.sendRequest("POST",t,a,r,s,i)},this.api=function(e,t,a){var r={method:e.toUpperCase(),cache:"no-cache",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${rym.session.token}`},redirect:"error",referrerPolicy:"origin"};switch(e){case"GET":var s=new URLSearchParams(a).toString();s.length&&(t+=`?${s}`);break;case"POST":case"PUT":case"DELETE":r.body=JSON.stringify(a);break}return fetch(t,r).then(i=>i)}}function RYM(){this.session=new RYMSession,this.request=new RYMRequest,this.modalDirty=!1,this.doModalLoading=function(){$("#modal_content").show().loadingAnim(),$("#modal_parent_frame")[0].style.display="flex",$("#modal_overlay").show(),$("html").addClass("modal_active")},this.markModalDirty=function(){this.modalDirty=!0},this.closeModal=function(){this.modalDirty&&!confirm("Are you sure you want to close this dialog? Press OK to confirm.")||($("#modal_parent_frame").hide(),$("#modal_content").html(""),$("#modal_overlay").fadeOut(100),$("html").removeClass("modal_active"),$("#body").off("keydown"),this.modalDirty=!1)},this.doModal=function(e,t,a){return d(this,null,function*(){a=a||{},a=Object.assign({mode:"message",frame_class:"standard"},a),$("#modal_parent_frame_inner")[0].className="modal_parent_frame_inner modal_parent_frame_inner_"+a.frame_class,$("#modal_parent_frame")[0].style.display="flex",$("#modal_overlay").show(),$("html").addClass("modal_active"),renderTemplate("ui.modal",{title:t,body:e,frame_class:a.frame_class}).then(r=>{$("#modal_content").html(r).show().addClass(),$("#body").on("keydown",function(s){if(s&&s.keyCode)switch(s.keyCode){case g_keyCodes.esc:return rym.closeModal(),!1;break}})})})},this.doModal2=function(e,t,a){return d(this,null,function*(){a=a||{},a=Object.assign({mode:"message",frame_class:"standard"},a),$("#modal_parent_frame_inner_level_2")[0].className="modal_parent_frame_inner modal_parent_frame_inner_"+a.frame_class,$("#modal_parent_frame_level_2")[0].style.display="flex",$("#modal_overlay_level_2")[0].style.display="flex",$("html").addClass("modal_active"),renderTemplate("ui.modal",{title:t,body:e,frame_class:a.frame_class}).then(r=>{$("#modal_content_level_2").html(r).show().addClass(),$("#body").on("keydown",function(s){if(s&&s.keyCode)switch(s.keyCode){case g_keyCodes.esc:return rym.closeModal2(),!1;break}})})})},this.closeModal2=function(){$("#modal_parent_frame_level_2").hide(),$("#modal_content_level_2").html(""),$("#modal_overlay_level_2").hide(),$("#modal_parent_frame").is(":visible")||$("html").removeClass("modal_active"),$("#body").on("keydown",function(e){if(e&&e.keyCode)switch(e.keyCode){case g_keyCodes.esc:return rym.closeModal(),!1;break}})},this.clearGlobalError=function(){$("#header_error").hide()},this.showGlobalError=function(e){$("#header_error_text").html(e),$("#header_error").fadeIn(100).fadeOut(10).fadeIn(100),$("#submitbtn")&&$("#submitbtn").prop("disabled",!1)},this.showGlobalMessage=function(e){$("#header_message_text").html(e),$("#header_message").fadeIn(100),$("#submitbtn")&&$("#submitbtn").prop("disabled",!1)},this.setupPage=function(){$(".timeago").timeago(),$(".has_tip").tipTip(),$(".ui_textarea").textareaUI(),$(".page_section_dynamic_fade").dynamicFadeSectionUI()}}rym=new RYM;
 
var RYMdynamicSection={initFade:function(i){var n=i.data("dynamic-fade-initialized");if(!n){i.data("dynamic-fade-initialized",!0);var t=i[0].id,a=i.outerHeight(),e=i[0].scrollHeight;e-50>a?(i.find(".page_section_dynamic_fade_cover").show(),i.find(".page_section_dynamic_fade_expand_button").show().unbind().on("click",function(){i.toggleClass("expanded")})):i.removeClass("page_section_dynamic_fade")}},initList:function(i){}};$.fn.extend({dynamicFadeSectionUI:function(){$(this).each(function(i){RYMdynamicSection.initFade($(this))})}}),rymQ(function(){$(".page_section_dynamic_fade").dynamicFadeSectionUI()});
 
var RYMheader={onClickBars:function(){if($("#header_extended_section").is(":visible")){RYMheader.dismissDesktopMenu();return}$("#mobile_header_menu").addClass("fixed"),$("#header_extended_section").show(),$("#content_cover").css({width:"100%",height:$(document).height(),top:0,left:0}).show().on("click",function(){RYMheader.dismissDesktopMenu()})},dismissDesktopMenu:function(){$("#content_cover").off("click").hide(),$("#header_extended_section").fadeOut(50),$("#mobile_header_menu").removeClass("fixed")},toggleMobileMenu:function(){$("#content_cover").is(":visible")?RYMheader.hideMobileMenu():RYMheader.showMobileMenu()},showMobileMenu:function(){$("#header_expanded").show(),$("#mobile_header_menu").addClass("fixed");var e=$(document).height()+"px";$("#content_cover").css({width:"100%",height:e,top:"6em",left:0}).show().on("click",function(){RYMheader.hideMobileMenu()})},hideMobileMenu:function(){$("#header_expanded").hide(),$("#mobile_header_menu").removeClass("fixed"),$("#content_cover").hide().off("click")}};
 
var RYMmobile={mobileMenu:{enterSelectionMode:function(){$(".mobile_menu")[0].className="mobile_menu selection_mode"},exitSelectionMode:function(){$(".mobile_menu")[0].className="mobile_menu"}},mobileExpand:{toggleFull:function(e){$("#expand_full_"+e).toggleClass("expanded")},toggleSection:function(e){$("#expand_section_"+e).toggleClass("expanded")},toggleFade:function(e){$("#expand_fade_"+e).toggleClass("expanded")}}},RYMdynamicSection={initFade:function(e){var i=e.data("dynamic-fade-initialized");if(!i){e.data("dynamic-fade-initialized",!0);var t=e[0].id,n=e.outerHeight(),a=e[0].scrollHeight;a-50>n?(e.find(".page_section_dynamic_fade_cover").show(),e.find(".page_section_dynamic_fade_expand_button").show().unbind().on("click",function(){e.toggleClass("expanded")})):e.removeClass("page_section_dynamic_fade")}},initList:function(e){}};$.fn.extend({dynamicFadeSectionUI:function(){$(this).each(function(e){RYMdynamicSection.initFade($(this))})}});
 
var l=(e,o,n)=>new Promise((t,a)=>{var r=i=>{try{s(n.next(i))}catch(p){a(p)}},c=i=>{try{s(n.throw(i))}catch(p){a(p)}},s=i=>i.done?t(i.value):Promise.resolve(i.value).then(r,c);s((n=n.apply(e,o)).next())});var RYMpagination={callback:function(e,o,n){let t=e.getAttribute("href"),a=e.parentNode;a.dataset.callbackComponent||(a=a.parentNode);let r=a.dataset.pageComponent;switch(a.dataset.callbackComponent){case"discography":switch(r){case"company_music.discography":case"genre.discography":return component.discography.onClickDiscographyPage(o,t,n)}break;case"charts":return page.charts.onClickChartsPage(o,t,n)}return window.history.pushState({},window.title,t),!1},openPageChooser:function(e){return l(this,null,function*(){$("#overlay_invisible").show().on("click",function(){RYMpagination.closePageChooser(e)}),$("#ui_pagination_page_chooser_"+e).show();for(var o='<div class="ui_pagination_page_chooser_row">',n=parseInt($("#ui_pagination_"+e).data("num-pages")),t=$("#ui_pagination_"+e).data("options"),a=1;a<=n;a++){a%10==0&&(o+='</div><div class="ui_pagination_page_chooser_row">');var r=t.url_template.replace("{{page}}",a);a==1&&(r=t.url_first_page);var c={url:r,num:a};o+=yield renderTemplate("ui.pagination.number",c)}o+="</div>",$("#ui_pagination_page_chooser_"+e).html(o)})},closePageChooser:function(e){$("#ui_pagination_page_chooser_"+e).hide(),$("#overlay_invisible").hide().off("click")}};
 
var _=(e,a,s)=>new Promise((r,l)=>{var c=n=>{try{o(s.next(n))}catch(i){l(i)}},t=n=>{try{o(s.throw(n))}catch(i){l(i)}},o=n=>n.done?r(n.value):Promise.resolve(n.value).then(c,t);o((s=s.apply(e,a)).next())});var RYMsearch={lastAjaxRequest:null,lastSearchValue:null,lastSearchTimer:null,searchDelay:1500,resultCache:{},currentResultSet:{},currentSelectedItem:{},blurTimer:{},initState:{},selectedId:null,searchEndpoint:"https://api.sonemic.com/1/search",types:{Music:[{type:"music",name:"music",label:"Everything",searchlabel:"music"},{type:"a",name:"artist",label:"Artists",searchlabel:"artists"},{type:"l",name:"release",label:"Releases",searchlabel:"releases"},{type:"y",name:"release",label:"V/A Releases",searchlabel:"va_releases"},{type:"b",name:"company_music",label:"Labels",searchlabel:"companies"},{type:"j",name:"catalog_no",label:"Catalog No.",searchlabel:"catalog_no"},{type:"g",name:"genre",label:"Genres",searchlabel:"music genres"},{type:"r",name:"work",label:"Works",searchlabel:"works"},{type:"u",name:"user",label:"Users",searchlabel:"user"},{type:"s",name:"list",label:"Lists",searchlabel:"list"}],Film:[{type:"films",name:"films",label:"Everything",searchlabel:"films"},{type:"F",name:"film",label:"Film titles",searchlabel:"film titles"},{type:"A",name:"film_person",label:"People",searchlabel:"cast/crew"},{type:"fg",name:"genre",label:"Genres",searchlabel:"film genres"}],Games:[{name:"games",label:"Everything",searchlabel:"games"},{name:"game",label:"Game titles",searchlabel:"game titles"},{name:"game_person",label:"People",searchlabel:"game persons"},{name:"company_game",label:"Companies",searchlabel:"game companies"},{name:"game_platform",label:"Platforms",searchlabel:"game platforms"},{name:"genre",label:"Genres",searchlabel:"game genres"},{name:"franchise",label:"Franchises",searchlabel:"franchises"},{name:"character",label:"Characters",searchlabel:"characters"},{name:"descriptor",label:"Descriptors",searchlabel:"game descriptors"},{name:"user",label:"Users",searchlabel:"user"},{name:"list",label:"Lists",searchlabel:"list"}],Community:[{name:"user",label:"Users",searchlabel:"users"},{name:"list",label:"Lists",searchlabel:"lists"}],location:[{name:"location",label:"Location",searchlabel:"location"}]},setHelpHeader:function(e,a){return _(this,null,function*(){let s=yield renderTemplate("ui.search.help."+a,{});$("#ui_search_results_"+e).html(s)})},initContextIndicator:function(e,a){var s="";switch(a){case"insertShortcut":var r=$("#ui_search_"+e).data("callback-id"),l=document.getElementById(r);if(l){var c=document.getElementById(r).selectionStart,t=$("#"+r).val();s=t.substring(0,c)+" [______]"}break;case"catalog":s="Catalog item...";break;case"addToList":s="Add to list...";break;default:s=""}$("#ui_search_context_indicator_inner_"+e).text(s)},init:function(e){var a=$("html, body").hasClass("scope_film")?"film":"music",s=$("#ui_search_"+e).data("callback");RYMsearch.selectScope(e,a),RYMsearch.setHelpHeader(e,"search"),RYMsearch.initContextIndicator(e,s),RYMsearch.initState[e]=!0;var r=$("#ui_search_input_"+e).val();r.length>0&&$("#ui_search_frame_"+e).addClass("has_content")},setDialogActive:function(e,a){RYMsearch.stopBodyScrolling(!a),a?(RYMsearch.lastBodyYOffset=document.body.scrollTop,$("#ui_search_frame_"+e).addClass("active")[0].scrollTop=0,$("html").addClass("modal_search_active"),$("#overlay_invisible").show().on("click",function(){RYMsearch.close(e)}),document.body.scrollTop=0):(document.body.scrollTop=RYMsearch.lastBodyYOffset,$("#ui_search_frame_"+e).removeClass("active"),$("html").removeClass("modal_search_active"),$("#overlay_invisible").hide().off("click"))},_freezeVp:function(e){e.preventDefault()},stopBodyScrolling:function(e){e===!0?document.body.addEventListener("touchmove",RYMsearch._freezeVp,!1):document.body.removeEventListener("touchmove",RYMsearch._freezeVp,!1)},_onSearchResults:function(e,a){return _(this,null,function*(){RYMsearch.lastSearchTimer=null;var s="",r=$("#ui_search_object_select_"+e).val();if(a.results.length===0)RYMsearch.setHelpHeader(e,"noresults");else{for(var l in a.results){s+='<div class="ui_search_object_category">',s+='<div class="ui_search_object_category_label">'+a.results[l].label_display,a.results[l].object!==r&&(s+=`<div onClick="RYMsearch.setObject('`+e+"', '"+a.results[l].object+`');" class="ui_search_object_category_only_btn">Only</div>`),s+="</div>";for(var c in a.results[l].items){var t=a.results[l].items[c];t.id=e,s+=yield renderTemplate("ui.search.result",t)}s+="</div>"}$("#ui_search_results_"+e).html(s),$(".has_tip").tipTip()}})},redirSearch:function(e,a){typeof e!="undefined"?wevt=e:window.event&&(wevt=window.event);var s=$("#ui_search_input_"+a).val(),r=$("#ui_search_scope_"+a).val(),l=$("#ui_search_object_select_"+a).val();(l==="music"||!l)&&(l=""),wevt&&(wevt.shiftKey||wevt.metaKey||e&&e.which==2)?window.open("/search?searchterm="+encodeURIComponent(s)+"&searchtype="+l,"_blank"):window.location="/search?searchterm="+encodeURIComponent(s)+"&searchtype="+l},doSearch:function(e){var a=$("#ui_search_input_"+e).val(),s=$("#ui_search_scope_"+e).val(),r=$("#ui_search_object_select_"+e).val(),l=$("#ui_search_"+e).data("config-string"),c=$("#ui_search_"+e).data("test-server");if(a.length==0){RYMsearch.setHelpHeader(e,"search");return}if(RYMsearch.lastAjaxRequest){try{RYMsearch.lastAjaxRequest.abort()}catch(i){}RYMsearch.lastAjaxRequest=null}var t;typeof c!="undefined"&&c.length>0?t={q:a,t:r,scope:s,test_server:c}:t={q:a,t:r,scope:s},t[l]=!0;var o=JSON.stringify(t);if(RYMsearch.resultCache[o]){var n=RYMsearch.resultCache[o];RYMsearch._onSearchResults(e,RYMsearch.resultCache[o]),$("#ui_search_icon_"+e)[0].className="fa fa-search ui_search_icon",console.log("Using cached search result for "+a);return}$("#ui_search_debug_"+e).html(""),RYMsearch.lastSearchTimer?(clearTimeout(RYMsearch.lastSearchTimer),RYMsearch.lastSearchTimer=null):$("#ui_search_results_"+e).html('<div class="page_loading">Loading...</div>')},close:function(e){RYMsearch.setDialogActive(e,!1),$("#overlay_invisible").hide().off("click")},clearSearch:function(e){$("#ui_search_input_"+e).val(""),RYMsearch.setHelpHeader(e,"search"),$("#ui_search_frame_"+e).removeClass("has_content")},onEscape:function(e){var a=$("#ui_search_input_"+e).val();a.length>0?RYMsearch.clearSearch(e):RYMsearch.close(e)},onFocus:function(e,a){RYMsearch.setDialogActive(a,!0);var s=$("#ui_search_"+a).data("callback");RYMsearch.initContextIndicator(a,s),RYMsearch.initState[a]||RYMsearch.init(a),rym.nextSearchType&&($("#ui_search_object_select_"+a).val(rym.nextSearchType),rym.nextSearchType=null)},onClickClose:function(e,a){RYMsearch.close(a)},onClickClearSearch:function(e,a){RYMsearch.clearSearch(a),RYMsearch.setDialogActive(a,!1)},onBlur:function(e,a){var s=$("#ui_search_input_"+a).val();s.length==0},onKeyDown:function(e,a){if(e){let s=e.keyCode||e.charCode;if(s)switch(s){case g_keyCodes.esc:return RYMsearch.onEscape(a),!1;break;case g_keyCodes.up:return!1;case g_keyCodes.down:return!1;case g_keyCodes.ret:return RYMsearch.redirSearch(e,a),!1}}},onInput:function(e,a){var s=$("#ui_search_input_"+a).val();s.length>0?($("#ui_search_frame_"+a).addClass("has_content"),RYMsearch.setDialogActive(a,!0)):$("#ui_search_frame_"+a).removeClass("has_content"),RYMsearch.doSearch(a)},onClickShortcut:function(e,a){e.stopPropagation(),$("#ui_search_result_shortcut_frame_"+a).addClass("clicked");var s=$("#ui_search_result_shortcut_"+a);return s.focus(),s.select(),!1},setObject:function(e,a){$("#ui_search_object_select_"+e).val(a),RYMsearch.doSearch(e)},onChangeObject:function(e,a){if(window.rym.preserveSearchType){var s=$("html, body").hasClass("scope_film")?"film":"music";window.localStorage["last_searchtype_"+s]=$("#ui_search_object_select_"+a).val()}RYMsearch.doSearch(a)},selectScope:function(e,a){a==="music"||a==="film"?$("#ui_search_results_frame_main_search").hide():$("#ui_search_results_frame_main_search").show(),$("#ui_search_scope_selector_"+e+" .ui_search_scope_selector_item").removeClass("selected"),$("#ui_search_scope_selector_"+a+"_"+e).addClass("selected"),$("#ui_search_scope_"+e).val(a),RYMsearch.populateSelectGroup(e,a),RYMsearch.doSearch(e)},onClickSearchScope:function(e,a,s){RYMsearch.selectScope(a,s)},insertShortcut:function(e,a){var s=$("#ui_search_"+e).data("callback-id"),r=document.getElementById(s).selectionStart,l=$("#"+s).val(),c=l.substring(0,r);c[c.length-1]!==" "&&(c+=" ");var t=l.substring(r);t.length>0&&t[0]!==" "&&(t=" "+t),$("#"+s).val(c+"["+a+"]"+t).focus(),RYMsearch.clearSearch(e),RYMsearch.close(e)},onClickResult:function(e,a,s,r,l,c,t,o,n){var i=$("#ui_search_"+l).data("callback");if(typeof e!="undefined"?wevt=e:window.event&&(wevt=window.event),n||wevt&&(wevt.shiftKey||wevt.metaKey||e&&e.which==2))return n?(window.open("https://"+s+r,"_blank"),!1):!0;if(wevt&&(wevt.shiftKey||wevt.metaKey||e&&e.which==1))switch(e.stopPropagation(),i){case"insertShortcut":RYMsearch.insertShortcut(l,o);break;case"catalog":RYMsearch.openCatalog(l,c,t);break;case"addToList":RYMsearch.openAddToList(l,c,t);break;default:window.location="https://"+s+r}return!1},populateSelectGroup:function(e,a){var s=!1,r=$("#ui_search_object_select_"+e),l=new Array,c=new Array,t=null,o=0;for(var n in RYMsearch.types){var i=RYMsearch.types[n],h=null;for(var m in i){var f=i[m].type,v=i[m].label,u=n.toLowerCase();(s||a==u)&&(l.indexOf(u)==-1&&(l.push(u),h=$('<optgroup label="'+n+'"></optgroup>'),t||(t=f)),h.append($('<option value="'+f+'">'+v+"</option>")),o++)}h&&c.push(h)}for(var p in c)r.html(c[p]);r.val(t)}};
 
var s=(i,a,e)=>new Promise((t,o)=>{var _=n=>{try{l(e.next(n))}catch(d){o(d)}},c=n=>{try{l(e.throw(n))}catch(d){o(d)}},l=n=>n.done?t(n.value):Promise.resolve(n.value).then(_,c);l((e=e.apply(i,a)).next())});var RYMtextarea={init:function(i){return s(this,null,function*(){var a=$(i).data("id"),e=$("#"+a),t=e.data("autoresize")||!1,o=$("#ui_textarea_tool_bold_"+a),_=$("#ui_textarea_tool_italic_"+a),c=$("#ui_textarea_tool_image_"+a),l=$("#ui_textarea_tool_embed_"+a),n=$("#ui_textarea_embed_insert_"+a),d=$("#ui_textarea_tool_link_"+a),v=$("#ui_textarea_link_insert_"+a),m=$("#ui_textarea_tool_tips_"+a),h="ontouchstart"in window;o.unbind().on("click",function(r){RYMtextarea.onClickBold($(e),r)}),_.unbind().on("click",function(r){RYMtextarea.onClickItalic($(e),r)}),c.unbind().on("click",function(r){RYMtextarea.onClickImage($(e),r)}),l.unbind().on("click",function(r){RYMtextarea.onClickEmbed($(e),r)}),n.unbind().on("click",function(r){RYMtextarea.onClickEmbedInsert($(e),r)}),d.unbind().on("click",function(r){RYMtextarea.onClickLink($(e),r)}),v.unbind().on("click",function(r){RYMtextarea.onClickLinkInsert($(e),r)}),m.unbind().on("click",function(r){RYMtextarea.onClickTips($(e),r)}),t&&e.on("input",function(r){RYMtextarea._autoResize(e,r)});var u;typeof window.rym_search_test_server!="undefined"?u={id:"ui_textarea_search_"+a,default_scope:window.rym_scope,test_server:window.rym_search_test_server,config_string:window.rym_search_config_string,callback:"insertShortcut",callback_id:a}:u={id:"ui_textarea_search_"+a,default_scope:window.rym_scope,callback:"insertShortcut",callback_id:a};let f=yield renderTemplate("ui.search",u);$("#ui_textarea_search_frame_"+a).html(f)})},_autoResize:function(i,a){return;var e,t,o,_,c,l,n},insertFormatTag:function(i,a,e){var t=i[0],o=t.scrollTop;if(document.selection){var _=document.selection.createRange().text;t.focus();var c=document.selection.createRange();c.text=a+_+e}else if(t.selectionStart|t.selectionStart==0){t.selectionEnd>t.value.length&&(t.selectionEnd=t.value.length);var l=t.selectionStart,n=t.selectionEnd+a.length;t.value=t.value.slice(0,l)+a+t.value.slice(l),t.value=t.value.slice(0,n)+e+t.value.slice(n),t.selectionStart=l+a.length,t.selectionEnd=n,t.focus()}t.scrollTop=o},onClickBold:function(i,a){var e=$(i).data("id"),t=$("#"+e);RYMtextarea.insertFormatTag(t,"[b]","[/b]")},onClickItalic:function(i,a){var e=$(i).data("id"),t=$("#"+e);RYMtextarea.insertFormatTag(t,"[i]","[/i]")},onClickImage:function(i,a){var e=$(i).data("id");$("#ui_textarea_link_"+e).hide(),$("#ui_textarea_embed_"+e).hide(),$("#ui_textarea_image_"+e).slideToggle(100)},onClickEmbed:function(i,a){var e=$(i).data("id");$("#ui_textarea_link_"+e).hide(),$("#ui_textarea_image_"+e).hide(),$("#ui_textarea_embed_"+e).slideToggle(100),$("#ui_textarea_embed_error_"+e).hide()},onClickEmbedInsert:function(i,a){var e=$(i).data("id"),t=$("#ui_textarea_embed_input_"+e).val();rym.request.post("UiValidateEmbedCode",{id:e,text:t},null,"script")},_embedCodeSuccessCallback:function(i,a){RYMtextarea.insertFormatTag($("#"+i),a,""),$("#ui_textarea_embed_input_"+i).val(""),$("#ui_textarea_embed_"+i).hide()},_embedCodeFailureCallback:function(i,a){$("#ui_textarea_embed_error_"+i).text(a).hide().fadeIn(200)},_imageUploadCallback:function(i,a,e){var t="[image:"+a+"]";RYMtextarea.insertFormatTag($("#"+i),t,"")},onClickLink:function(i,a){var e=$(i).data("id");$("#ui_textarea_image_"+e).hide(),$("#ui_textarea_embed_"+e).hide(),$("#ui_textarea_link_"+e).slideToggle(100),$("#ui_textarea_link_error_"+e).hide()},onClickLinkInsert:function(i,a){var e=$(i).data("id"),t=$("#ui_textarea_link_url_"+e).val(),o=$("#ui_textarea_link_name_"+e).val();$("#ui_textarea_link_error_"+e).hide(),t.indexOf("https://")!=0&&t.indexOf("http://")!=0?$("#ui_textarea_link_error_"+e).text("The link you entered is not valid.  Please use a link that starts with http:// or https://").fadeIn(200):o.length>0?RYMtextarea.insertFormatTag($("#"+e),"["+t+","+o+"]",""):RYMtextarea.insertFormatTag($("#"+e),t,"")},onClickTips:function(i,a){var e=$(i).data("id");$("#ui_textarea_help_"+e).slideToggle(100)}};$.fn.extend({textareaUI:function(){$(this).each(function(i){RYMtextarea.init($(this))})}}),rymQ(function(){$(".ui_textarea").textareaUI()});
 
 
